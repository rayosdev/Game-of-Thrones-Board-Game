<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Select Character</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../index/index.css">
</head>
<style>



</style>
<body>
    

    <!-- API -->
    <!-- https://anapioficeandfire.com/. -->

    <!-- multiplayer -->
    <!-- https://socket.io/docs/ -->

    
    <div class="container">
        
        <div class="UI">
            <h1 class="UI__header-text">Select your Character</h1>
            <div class="UI__character-container" id="characterContainer">

                <script>
                    let playableCharacters = 
                        [
                            {name:"Jon Snow", ID:583},
                            {name:"Daenerys Targaryen", ID:1303},
                            {name:"Tyrion Lannister", ID:1052},
                            {name:"Cersei Lannister", ID:238},
                            {name:"Arya Stark", ID:148},
                            {name:"Jorah Mormont", ID:1560},
                            {name:"Brandon Stark", ID:206},
                            {name:"Brienne of Tarth", ID:216}
                        ]

                        // let exampleCharacter = {
                        //     name: "bob",
                        //     title: "bobstar",
                        //     alias: "ringo",
                        //     house: "børen",
                        //     coatOfArms: "den bøyde skje",
                        //     words: "det er deg det",
                        //     ancestralWeapons: "utedo"
                        // }
                        
                                            
                    function generatCharacterHTML(character){
                        

                        let characterContainer = document.getElementById('characterContainer')
                        let chracterDiv = document.createElement('div')
                        chracterDiv.classList.add('character')
                        chracterDiv.innerHTML = `
                            <h3 class="character_name">${character.name}</h3>
                            <img src="" alt="" class="character__image">
                            <div class="character__info">
                                <h4 class="character__info__title">${(character.title == "") ? character.alias : character.title}</h4>
                                <p class="character__info__house">${character.house}</p>
                                <img src="" alt="" class="character__info__coat-of-arms">
                                <p class="character__info__words">${character.words}</p>
                                <p class="character__info__ancestral-weapons">${character.ancestralWeapons}</p>
                            </div>
                        `
                        characterContainer.appendChild(chracterDiv)
                    }
                        
                            
                    function fetchCharacter(charcterObject){
                        let returnCharacter = {}
                        
                        fetch('https://anapioficeandfire.com/api/characters/' + charcterObject.ID)
                            .then(respons => respons.json())
                            .then(json => {


                                returnCharacter.name = json.name
                                returnCharacter.title = (json.titles.length != 0) ? json.titles[0] : "None"
                                returnCharacter.alias = (json.aliases.length
                                != 0) ? json.aliases[0] : "None"

                                fetch(json.allegiances[0])
                                    .then(respons => respons.json())
                                    .then(json => {

                                        returnCharacter.house = json.name
                                        returnCharacter.coatOfArms = json.coatOfArms
                                        returnCharacter.words = json.words
                                        returnCharacter.ancestralWeapons = json.ancestralWeapons 
                                        // console.log(returnCharacter);
                                })
                                .then( e => generatCharacterHTML(returnCharacter))
                                .catch(error => console.log("ERROR MAN INTER!: ", error))
                            })
                            .catch(error => console.log("ERROR MAN!: ",error))
                            return returnCharacter
                    }
                    
                    playerOne = fetchCharacter(playableCharacters[7])
                    playertwo = fetchCharacter(playableCharacters[0])

                    console.log(playerOne, " - ", playertwo);

                </script>

<!--                     
                <div class="character">
                    <h3 class="character_name">John Snow</h3>
                    <img src="" alt="" class="character_image">
                    <div class="character__info">
                        <h4 class="character__info__title">king of the north</h4>
                        <p class="character__info__house"></p>
                        <img src="" alt="" class="character__info__coat-of-arms">
                        <p class="character__info__words"></p>
                        <p class="character__info__ancestral-weapons"></p>
                    </div>
                </div>
 -->

            </div>
            <button class="UI__arrow-left"> < </button>
            <button class="UI__arrow-right"> > </button>
    </div>

</body>
</html>